<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sp.app.mapper.PolicyBoardMapper">

	<!-- NULL을 허용한 컬럼은 jdbcType을 명시해야 한다. -->
	<insert id="insertPolicy"
		parameterType="com.sp.app.model.PolicyBoard">
		<selectKey keyProperty="psnum" resultType="long"
			order="BEFORE">
			SELECT policy_board_seq.NEXTVAL FROM dual
		</selectKey>
		INSERT INTO policy_board (psnum, num, subject, content, reg_date,
		hitCount)
		VALUES (#{psnum}, #{num}, #{subject}, #{content}, SYSDATE, 0)
	</insert>

	<insert id="insertPolicyFile"
		parameterType="com.sp.app.model.PolicyBoardFile">
		<selectKey keyProperty="fnum" resultType="long" order="BEFORE">
			SELECT policy_board_file_seq.NEXTVAL FROM dual
		</selectKey>
		INSERT INTO policy_board_file (fnum, psnum, ssfname, cpfname)
		VALUES (#{fnum}, #{psnum}, #{ssfname}, #{cpfname})
	</insert>

</mapper>